{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/resource-planner-v1.2.json",
  "title": "Resource Planner Plan â€” v1.2",
  "type": "object",
  "required": ["meta", "resources", "allocations"],

  "properties": {
    "meta": {
      "type": "object",
      "required": ["planner_name", "created_at", "version"],
      "properties": {
        "planner_name": { "type": "string", "minLength": 1 },
        "created_at":   { "$ref": "#/$defs/dateTimeIso" },
        "version":      { "type": "string", "pattern": "^[0-9]+\\.[0-9]+$" }
      },
      "additionalProperties": true
    },

    "resources": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "name", "cost_per_hour"],
        "properties": {
          "id":            { "type": "string", "minLength": 1 },
          "name":          { "type": "string", "minLength": 1 },
          "class":         { "type": "string" },
          "description":   { "type": "string" },
          "cost_per_hour": { "type": "number", "minimum": 0 }
        },
        "additionalProperties": true
      }
    },

    "allocations": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": [
          "id",
          "resource_id",
          "task",
          "start",
          "allocation_pct",
          "baseline_start",
          "cost"
        ],
        "properties": {
          "id":            { "type": "string", "minLength": 1 },
          "resource_id":   { "type": "string", "minLength": 1 },
          "task":          { "type": "string", "minLength": 1 },
          "start":         { "$ref": "#/$defs/dateTimeIso" },
          "end":           { "$ref": "#/$defs/dateTimeIso" },

          "allocation_pct": { "type": "number", "minimum": 0 },

          "notes":          { "type": "string" },

          "baseline_start": { "$ref": "#/$defs/dateTimeIso" },
          "baseline_end":   { "$ref": "#/$defs/dateTimeIso" },

          "cost":           { "type": "number", "minimum": 0 }
        },
        "additionalProperties": true
      }
    }
  },

  "$defs": {
    "dateTimeIso": {
      "type": "string",
      "format": "date-time",
      "examples": ["2025-09-10T08:00:00Z"]
    }
  },

  "additionalProperties": false
}
